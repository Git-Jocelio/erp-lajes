unit unit_calcular_custo_de_lajes;

interface

uses
  FireDAC.Comp.Client, Vcl.Forms, udmConn, Vcl.Dialogs;

procedure GravarCusto( forma: integer );

implementation







procedure GravarCusto( forma: integer );
var
  loQry : TFDQuery;
begin
  (*
  try
 // ShowMessage('FORMA ' + INTTOSTR(forma)) ;
    loQry := TFDQuery.Create(APPLICATION);
    loqry.Connection := dmConn.FDConnection;
        ShowMessage('aqui ! ');
    // gravar custo
    loqry.SQL.Clear;
    //qryAux.SQL.Text := 'select * from PRODUTOS_VIGAS where FORMA_MEDIDA =' + uBiblioteca.SeSenao(rgForma.ItemIndex = 0,'130','250' );
    loqry.SQL.add('select * from PRODUTOS_VIGAS where FORMA_MEDIDA =:FORMA_MEDIDA '); //+ inttostr( forma );
    loqry.ParamByName('FORMA_MEDIDA').AsInteger := forma;
    loqry.Open();

    loqry.First;
    while not loqry.Eof do
    begin
      AlterarCustoViga(loqry.FieldByName('PRODUTO_ID').AsInteger);
      //
      loqry.Next;
    end;
    ShowMessage('CUSTO DAS VIGAS CALCULADOS COM SUCESSO !!!');
//    ShowMessage('aqui ! ');
    {atualiza custo e preços de venda a laje conforme a altura selecionada}
    prc_atualiza_preco_laje(p_altura_trelica, p_largura_forma);

  finally
    loQry.Close;
    FreeAndNil(loQry);
  end;
  *)
end;


end.
