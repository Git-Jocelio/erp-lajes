//***************************************************************************//
// Cadastro de Plano de Contas
// desenvolvida por Jocelio G Silva
// inicio : 23/10/2023 retomando o sistema ! Deus seja louvado.
// fim :
//***************************************************************************//

unit ufrmPlanoContas;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, ufrmBaseGrade, Data.DB,
  FireDAC.Stan.Intf, FireDAC.Stan.Option, FireDAC.Stan.Param,
  FireDAC.Stan.Error, FireDAC.DatS, FireDAC.Phys.Intf, FireDAC.DApt.Intf,
  FireDAC.Stan.Async, FireDAC.DApt, System.Actions, Vcl.ActnList,
  System.ImageList, Vcl.ImgList, Vcl.Menus, FireDAC.Comp.DataSet,
  FireDAC.Comp.Client, Vcl.Grids, Vcl.DBGrids, Vcl.ExtCtrls, Vcl.ComCtrls,
  Vcl.ToolWin, Vcl.DBCtrls, Vcl.StdCtrls, Vcl.Buttons, uBiblioteca;

type
  TfrmPlanoContas = class(TfrmBaseGrade)

    procedure FormCreate(Sender: TObject);

    procedure actIncluirExecute(Sender: TObject);
    procedure actAlterarExecute(Sender: TObject);
    procedure actExcluirExecute(Sender: TObject);

  private

    procedure prc_sql;
    function  fnc_validar_pesquisa: boolean;
    procedure prc_pesquisar;

  public
    { Public declarations }
  end;

procedure prc_executa;

implementation

procedure prc_executa;
var
  loForm :  TfrmPlanoContas;
begin
  try
    loForm :=  TfrmPlanoContas.Create(Application);
    loForm.ShowModal;
  finally
    FreeAndNil(loform);
  end;
end;

{$R *.dfm}

procedure TfrmPlanoContas.actAlterarExecute(Sender: TObject);
begin
  inherited;
  //ShowMessage(qry.SQL.Text);
//  ufrmUsuariosE.prc_alterar(qry.fieldbyname('ID').AsInteger);
  uBiblioteca.AtualizaQuery(qry);

end;

procedure TfrmPlanoContas.actExcluirExecute(Sender: TObject);
begin
  inherited;
//  ufrmUsuariosE.prc_excluir(qry.fieldbyname('ID').AsInteger);
  uBiblioteca.AtualizaQuery(qry);

end;

procedure TfrmPlanoContas.actIncluirExecute(Sender: TObject);
begin
  inherited;
  //ufrmUsuariosE.prc_incluir;
  uBiblioteca.AtualizaQuery(qry);

end;

function TfrmPlanoContas.fnc_validar_pesquisa: boolean;
begin
  result := false;

  result := true;
end;

procedure TfrmPlanoContas.FormCreate(Sender: TObject);
begin
  inherited;
  // property tabela no form BaseGrade
  self.Tabela := 'PLANO_CONTAS';
  self.Titulo := 'PLANO DE CONTAS' + '[' + self.Tabela + ']';
  Caption := Titulo;
  prc_sql;

  btnLocalizar.Click;
end;

procedure TfrmPlanoContas.prc_pesquisar;
begin
  qry.close;
  qry.Open;

end;

procedure TfrmPlanoContas.prc_sql;
begin
  qry.Open('select * from ' + Self.Tabela + ' order by DESCRICAO');
end;

end.
