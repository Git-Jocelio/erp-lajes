25/03/2022

CREATE TABLE FECHAMENTO_COMISSAO (
    ID              INTEGER NOT NULL,
    CADASTRADO_EM   DATE NOT NULL,
    MES             VARCHAR(10) NOT NULL,
    ANO             SMALLINT,
    PESSOA_ID       INTEGER NOT NULL,
    TOTAL_VENDA     DECIMAL(9,2) DEFAULT 0,
    TOTAL_COMISSAO  DECIMAL(9,2) DEFAULT 0,
    TOTAL_DEBITOS   DECIMAL(9,2) DEFAULT 0,
    SALDO_LIQUIDO   DECIMAL(9,2) DEFAULT 0
);

ALTER TABLE FECHAMENTO_COMISSAO ADD CONSTRAINT PK_FECHAMENTO_COMISSAO PRIMARY KEY (ID);


ALTER TABLE FECHAMENTO_COMISSAO ADD CONSTRAINT FK_FECHAMENTO_COMISSAO_1 FOREIGN KEY (PESSOA_ID) REFERENCES PESSOAS (ID);



CREATE TABLE FECHAMENTO_COMISSOES (
    ID                      INTEGER NOT NULL,
    FECHAMENTO_COMISSAO_ID  INTEGER NOT NULL,
    COMISSAO_ID             INTEGER,
    VALOR_COMISSAO          DECIMAL(9,2) DEFAULT 0,
    VALOR_PAGO              DECIMAL(9,2) DEFAULT 0
);



ALTER TABLE FECHAMENTO_COMISSOES ADD CONSTRAINT PK_FECHAMENTO_COMISSOES PRIMARY KEY (ID);

ALTER TABLE FECHAMENTO_COMISSOES ADD CONSTRAINT FK_FECHAMENTO_COMISSOES_1 FOREIGN KEY (FECHAMENTO_COMISSAO_ID) REFERENCES FECHAMENTO_COMISSAO (ID);

ALTER TABLE FECHAMENTO_COMISSOES ADD CONSTRAINT FK_FECHAMENTO_COMISSOES_2 FOREIGN KEY (COMISSAO_ID) REFERENCES COMISSAO (ID);


CREATE TABLE FECHAMENTO_DEBITOS (
    ID                      INTEGER NOT NULL,
    FECHAMENTO_COMISSAO_ID  INTEGER,
    CONTAS_RECEBER_ID       INTEGER,
    VALOR_DEBITO            DECIMAL(9,2) DEFAULT 0,
    VALOR_PAGO              DECIMAL(9,2)
);


ALTER TABLE FECHAMENTO_DEBITOS ADD CONSTRAINT PK_FECHAMENTO_DEBITOS PRIMARY KEY (ID);



ALTER TABLE FECHAMENTO_DEBITOS ADD CONSTRAINT FK_FECHAMENTO_DEBITOS_1 FOREIGN KEY (FECHAMENTO_COMISSAO_ID) REFERENCES FECHAMENTO_COMISSAO (ID);
ALTER TABLE FECHAMENTO_DEBITOS ADD CONSTRAINT FK_FECHAMENTO_DEBITOS_2 FOREIGN KEY (CONTAS_RECEBER_ID) REFERENCES CONTAS_RECEBER (ID);

ALTER TABLE FECHAMENTO_COMISSAO
ADD OBS VARCHAR(500)

ALTER TABLE VENDEDORES ADD CONSTRAINT FK_VENDEDORES_1 FOREIGN KEY (PESSOA_ID) REFERENCES PESSOAS (ID);


ALTER TABLE CONTAS_RECEBER_BAIXA
ADD CONTAS_RECEBER_ID INTEGER

atualizado tudo na triunfo acima em 30/03/22

